

do $$
declare
 v_1 int2;
begin
	v_1 := 1;
	RAISE NOTICE 'Text %', 'FIRST';
end $$;


do $$
declare
  t text;
  ac aircrafts.aircraft_code%TYPE := 's3';
  rc aircrafts%ROWTYPE;
begin
    raise notice 'A= %', ac;
	select aircraft_code into strict ac from aircrafts limit 1;
    raise notice 'A= %', ac;
    select * into rc from aircrafts limit 2;
    raise notice 'A= %', rc;
end $$;


do $$
declare
  t text;
  rc aircrafts%ROWTYPE;
begin
    select * into rc from aircrafts limit 1;
    if rc.range > 4900 then
       raise notice 'A= %', rc.range;
    elsif rc.range > 7000 then
       raise notice 'Big';
    else
       raise notice 'Unknown';
    end if;
end $$;

select * from aircrafts;

do $$
declare
	v_model aircrafts.model%type;
	v_s text;
begin
    select model into v_model from aircrafts limit 1 offset 6;
	case v_model
      when 'Боинг 777-300' then raise notice 'Boeing 777-300';
      when 'Боинг 767-300' then raise notice 'Boeing 767-300';
      else raise notice 'Other';
    end case;

	case 
      when v_model like 'Боинг%' then raise notice 'Boeing...';
      when v_model like 'Аэробус%' then raise notice 'Airbus...';
      else raise notice 'Other1';
    end case;
 
    v_s :=
	case 
      when v_model like 'Боинг%' then 'Boeing...'
      when v_model like 'Аэробус%' then 'Airbus...'
      else 'Other1'
    end;
  
    raise notice 'V_s = %', v_s;	
end $$;


do $$
declare
  v_i int2;
begin
   v_i := 1;
   LOOP
      raise notice 'i = %', v_i;
      v_i := v_i + 1;
      exit when v_i > 5;
   end loop;
   
   v_i := 1;
   while v_i <= 5 LOOP
      raise notice 'i1 = %', v_i;
      v_i := v_i + 1;
      continue when v_i = 3;
   end loop;

   for v_i in reverse 5..1 loop
      raise notice 'i2 = %', v_i;
   end loop;
  
end $$;

--cursor


do $$
declare
	v_model aircrafts.model%type;
	v_s text;
    cur1 refcursor;
    cur_air_mod cursor for 
      select model from aircrafts;
    --cur_row cur_air_mod%rowtype;
begin
    --open cur1 for select * from aircrafts;
    open cur_air_mod;
    loop
      fetch from cur_air_mod into v_model;
      exit when not found;
      raise notice 'V_s = %', v_model;
    end loop;
    close cur_air_mod;	

    for v_model in select model from aircrafts where 1=1 order by 1 asc
    loop
      raise notice 'V_s_for = %', v_model;
      exit when v_model = 'Аэробус A320-200';
    end loop;

end $$;
